image: debian:bullseye

variables:
  GIT_SUBMODULE_STRATEGY: recursive

stages:
- test

ansible_lint:
  stage: test
  before_script:
  - apt update
  - apt install -qq -y ansible-lint
  script:
  - ansible-lint playbook.yml

shellcheck:
  stage: test
  before_script:
    - apt update && apt install -y shellcheck
  script:
    - find ./roles/ -name "*.sh" -exec shellcheck "{}" \+
